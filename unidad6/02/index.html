<!-- index.html -->
<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>u6.2 JSON: Alvaro Garcia Gonzalez</title>
    <style>
        #parrafo {
            white-space: pre-line;
            background-color: beige;
            padding: 10px;
            margin: 10px;
        }

        #parrafo span {
            font-weight: bolder;
        }
    </style>
</head>

<body>
    <h1>Listado personas</h1>
    <button>Cargar lista (JSon)</button>
    <div id="parrafo"></div>
    <script>
        var boton=document.getElementsByTagName("button");
        // fetch() es una función incorporada en los navegadores hacer solicitud HTTP (como GET, POST). 
        // te permite obtener datos desde o hacia un servidor de forma asincrona, 
        // sin recargar la página 
        // fetch(url, opciones) 
        // .then (respuesta => { 
        //    manejar respuesta }) 
        // .catch(error => { 
        //    manejar errores 
        //   }); 
        boton.addEventListener("click", function () {
        fetch('02.json')
            .then(response => {
                if (!response.ok) throw new Error("Error en tiempo de ejecución al cargar")
                return response.json(); //convierte la respuesta en json 
            }
            )
            .then(jsonData => {
                jsonData.forEach(persona => {
                    console.log(jsonData); // jsonData es un objeto JavaScript 
                    var p = document.getElementById('parrafo');
                    p.innerHTML += `<li><span class="clave">Nombre: </span>$(persona.Nombre)-
                        <span class="clave">Edad: </span>$(persona.Edad)</li>`
                });
            })
            .catch(error => console.log(error)); 
        })
    </script>
</body>

</html>